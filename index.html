<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SART Experiment</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container d-flex align-items-center justify-content-center min-vh-100">
        <div class="text-center">

            <!-- INSTRUCTIONS SCREEN -->
            <div id="instructions-screen">
                <h1 class="mb-4">SART Instructions</h1>
                <p class="lead">You will see a series of numbers (1-9) presented one at a time.</p>
                <p class="lead">Your task is to press the <strong>SPACEBAR</strong> for every number you see, <strong>EXCEPT</strong> for the number <strong>3</strong>.</p>
                <p class="lead">Try to be as fast and as accurate as possible. The task will take a few minutes.</p>
                <div class="card text-start my-4">
                    <div class="card-header">Configuration (optional)</div>
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="config-stimulus-digits" class="form-label">Stimulus digits (comma-separated)</label>
                                <input type="text" id="config-stimulus-digits" class="form-control" value="1,2,3,4,5,6,7,8,9">
                            </div>
                            <div class="col-md-6">
                                <label for="config-target-digit" class="form-label">Target digit</label>
                                <input type="number" id="config-target-digit" class="form-control" value="3" min="0" max="9">
                            </div>
                            <div class="col-md-6">
                                <label for="config-n-trials" class="form-label">Number of trials per run</label>
                                <input type="number" id="config-n-trials" class="form-control" value="10" min="1">
                            </div>
                            <div class="col-md-6">
                                <label for="config-target-probability" class="form-label">Target probability (0-1)</label>
                                <input type="number" id="config-target-probability" class="form-control" value="0.11" step="0.01" min="0" max="1">
                            </div>
                            <div class="col-md-6">
                                <label for="config-stimulus-duration" class="form-label">Stimulus duration (ms)</label>
                                <input type="number" id="config-stimulus-duration" class="form-control" value="250" min="1">
                            </div>
                            <div class="col-md-6">
                                <label for="config-isi" class="form-label">Interstimulus interval (ms)</label>
                                <input type="number" id="config-isi" class="form-control" value="900" min="0">
                            </div>
                        </div>
                    </div>
                </div>
                <button id="start-run-1" class="btn btn-primary btn-lg mt-4">Click to Start</button>
            </div>

            <!-- SART TASK SCREEN -->
            <div id="sart-screen" class="d-none">
                <div id="stimulus-display" class="display-1"></div>
            </div>

            <!-- BREAK SCREEN -->
            <div id="break-screen" class="d-none">
                <h1 class="mb-4">First Run Complete</h1>
                <p class="lead">Please proceed with the intervention.</p>
                <p class="lead">When you are ready to begin the second part of the experiment, click the button below.</p>
                <button id="start-run-2" class="btn btn-primary btn-lg mt-4">Start Second Run</button>
            </div>

            <!-- RESULTS SCREEN -->
            <div id="results-screen" class="d-none w-100">
                <h1 class="mb-3">Experiment Results</h1>
                <div class="row g-4 align-items-stretch">
                    <!-- LEFT: Existing Visualizations -->
                    <div class="col-lg-8">
                        <div class="row mb-3">
                            <!-- Commission Errors -->
                            <div class="col-md-4">
                                <h4>Commission Errors</h4>
                                <div class="chart-container">
                                    <div class="bar-wrapper">
                                        <div class="bar" id="bar-ce-1"></div>
                                        <div class="bar-label">Run 1</div>
                                        <div class="bar-value" id="val-ce-1"></div>
                                    </div>
                                    <div class="bar-wrapper">
                                        <div class="bar" id="bar-ce-2"></div>
                                        <div class="bar-label">Run 2</div>
                                        <div class="bar-value" id="val-ce-2"></div>
                                    </div>
                                </div>
                            </div>
                            <!-- Omission Errors -->
                            <div class="col-md-4">
                                <h4>Omission Errors</h4>
                                <div class="chart-container">
                                    <div class="bar-wrapper">
                                        <div class="bar" id="bar-oe-1"></div>
                                        <div class="bar-label">Run 1</div>
                                        <div class="bar-value" id="val-oe-1"></div>
                                    </div>
                                    <div class="bar-wrapper">
                                        <div class="bar" id="bar-oe-2"></div>
                                        <div class="bar-label">Run 2</div>
                                        <div class="bar-value" id="val-oe-2"></div>
                                    </div>
                                </div>
                            </div>
                            <!-- Mean Reaction Time -->
                            <div class="col-md-4">
                                <h4>Mean RT (ms)</h4>
                                <div class="chart-container">
                                    <div class="bar-wrapper">
                                        <div class="bar" id="bar-rt-1"></div>
                                        <div class="bar-label">Run 1</div>
                                        <div class="bar-value" id="val-rt-1"></div>
                                    </div>
                                    <div class="bar-wrapper">
                                        <div class="bar" id="bar-rt-2"></div>
                                        <div class="bar-label">Run 2</div>
                                        <div class="bar-value" id="val-rt-2"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Reaction Time Line Chart -->
                        <div class="row">
                            <div class="col-12">
                                <h4>Reaction Time Across Trials</h4>
                                <canvas id="rt-chart" width="800" height="260"></canvas>
                                <div class="legend">
                                    <span class="legend-item"><span class="legend-color run1"></span> Run 1</span>
                                    <span class="legend-item"><span class="legend-color run2"></span> Run 2</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- RIGHT: Total Errors Comparison -->
                    <div class="col-lg-4">
                        <h4>Total Errors (Commission + Omission)</h4>
                        <div class="chart-container total-errors">
                            <div class="bar-wrapper">
                                <div class="bar" id="bar-total-1"></div>
                                <div class="bar-label">Run 1</div>
                                <div class="bar-value" id="val-total-1"></div>
                            </div>
                            <div class="bar-wrapper">
                                <div class="bar" id="bar-total-2"></div>
                                <div class="bar-label">Run 2</div>
                                <div class="bar-value" id="val-total-2"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main JS File -->
    <script src="app.js"></script>
</body>
</html>